<style>
  label {
    font-weight:bold;
    padding-top:15px;
  }
</style>
<%= tr8n_with_options_tag(:default_locale => Tr8n::Config.default_admin_locale, :admin => true) do %>

  <%= render :partial => "/tr8n/app/common/header" %>
  <div class="tr8n tr8n_container">

    <div class="section_title">
      <%=render(:partial => "sections") %>
      <%=tra("Application Sources") %>
    </div>

    <div class="section grey">
      <div class="tr8n_float_right" style="padding-right:5px;">
        <%=tr8n_help_icon_tag("Application Sources") %>
      </div>

      <div class="tr8n_text_align_left" style="padding-top:5px;padding-bottom:20px;font-size:12px;">
        <%= tra("Application sources are groups of translation keys.") %>
        <%= tra("Most of the application sources are dynamically generated from the source code.") %>
        <%= tra("Usually keys are grouped into sources by a page.") %> <%= tra("But a single page can also contain multiple sources.") %>
        <%= tra("Administrators and managers can manually create sources and assign keys to them.") %>
      </div>

    </div>

    <div class="section blue">
      <%= form_tag({}, {:method => :get}) do %>
        <div class="tr8n_float_right">
          <button type="submit" class="btn btn-primary">
            <%=tra("Search")%>
          </button>
          <%=link_to("+", {:action => :source_modal, :forward_to => "sources"}, {"class" => "btn", "data-toggle" => "dynamic_modal"})%>
        </div>

        <div class="tr8n_text_align_left">
          <%=text_field_tag(:search, params[:search], {:style => "width:87%;font-size:12px;height:20px;background: white url(/assets/tr8n/icn_search.png) right no-repeat; padding-right: 20px; border-radius:10px;", :placeholder => trla("Search sources")})%>
        </div>
      <% end %>
    </div>


    <div class="section">
      <%= tr8n_paginator_tag(@sources, :subject => 'source') if @sources.any? %>

      <table class="table table-hover">
        <thead>
        <tr>
          <th style="width:10%"><%=tra("Keyword/Path") %></th>
          <th style="width:20%"><%=tra("Name") %></th>
          <th style="width:50%"><%=tra("Description") %></th>
          <th style="width:10%; text-align:right; padding-right:15px;"><%=tra("Keys") %></th>
          <th style="width:15%; text-align:right"></th>
        </tr>
        </thead>
        <tbody>
        <% @sources.each do |source| %>
          <tr>
            <td>
              <%=source.source%>
            </td>
            <td>
              <%=source.name%>
            </td>
            <td>
              <%=source.description%>
            </td>
            <td style="text-align:right; padding-right:15px;">
              <%=link_to(source.translation_keys.count, :controller => "/tr8n/app/phrases", :action => :index, :source_id => source.id)%>
            </td>
            <td style="text-align:right">
              <%=link_to("<i class='icon-pencil'></i>".html_safe, {:action => :source_modal, :id => source.id, :forward_to => "sources"}, {"data-toggle" => "dynamic_modal"})%>
              <%=link_to("<i class='icon-remove'></i>".html_safe, {:action => :delete_source, :id => source.id}, {:confirm => trla("Are you sure you want to delete this source?")})%>
            </td>
          </tr>
        <% end %>
        </tbody>
      </table>

    </div>

  </div>
  <%= render :partial => "/tr8n/app/common/footer" %>

  <%= stylesheet_link_tag('tr8n/bootstrap/bootstrap-switch.css') %>
  <%=javascript_include_tag('tr8n/vendor/bootstrap/bootstrap-switch.js') %>

<% end %>
